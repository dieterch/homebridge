{
    "bridge": {
        "name": "Homebridge 2D1E",
        "username": "0E:56:03:9A:2D:1E",
        "port": 51359,
        "pin": "031-45-154"
    },
    "accessories": [
        {
            "accessory": "mqttthing",
            "type": "switch",
            "name": "Kueche Arbeit Licht",
            "#url": "http://192.168.15.100:1883",
            "caption": "KUE_ArbeitsLicht",
            "topics": {
                "getOn": "zwave/Kueche/3/37/2/0",
                "setOn": "zwave/Kueche/3/37/2/0/set"
            },
            "integerValue": "false",
            "onValue": "true",
            "offValue": "false"
        },
        {
            "accessory": "mqttthing",
            "type": "switch",
            "name": "Kueche Tisch Licht",
            "#url": "http://192.168.15.100:1883",
            "caption": "KUE_TischLicht",
            "topics": {
                "getOn": "zwave/Kueche/3/37/1/0",
                "setOn": "zwave/Kueche/3/37/1/0/set"
            },
            "integerValue": "false",
            "onValue": "true",
            "offValue": "false"
        },
        {
            "accessory": "mqttthing",
            "type": "switch",
            "name": "Wohnzimmer 1LichtSchalter",
            "#url": "http://192.168.15.65:1883",
            "caption": "WZ_Licht1",
            "topics": {
                "getOn": "zwave/Wohnzimmer/5/37/2/0",
                "setOn": "zwave/Wohnzimmer/5/37/2/0/set"
            },
            "integerValue": "false",
            "onValue": "true",
            "offValue": "false"
        },
        {
            "accessory": "mqttthing",
            "type": "switch",
            "name": "Wohnzimmer 2LichtSchalter",
            "#url": "http://192.168.15.100:1883",
            "caption": "WZ_Licht2",
            "topics": {
                "getOn": "zwave/Wohnzimmer/7/37/1/0",
                "setOn": "zwave/Wohnzimmer/7/37/1/0/set"
            },
            "integerValue": "false",
            "onValue": "true",
            "offValue": "false"
        },
        {
            "accessory": "mqttthing",
            "type": "switch",
            "name": "Wohnzimmer TV BackSchalter",
            "#url": "http://192.168.15.100:1883",
            "caption": "Wohnzimmer TV BackSchalter",
            "topics": {
                "getOn": "zwave/Wohnzimmer/4/37/1/0",
                "setOn": "zwave/Wohnzimmer/4/37/1/0/set"
            },
            "integerValue": "false",
            "onValue": "true",
            "offValue": "false"
        },
        {
            "accessory": "mqttthing",
            "type": "switch",
            "name": "Flur Licht Schalter",
            "#url": "http://192.168.15.100:1883",
            "caption": "Flur Licht Schalter",
            "topics": {
                "getOn": "shellies/shelly1-554C88/relay/0",
                "setOn": "shellies/shelly1-554C88/relay/0/command"
            },
            "integerValue": "false",
            "onValue": "on",
            "offValue": "off"
        },
        {
            "accessory": "mqttthing",
            "type": "switch",
            "name": "Bad Deckenlicht Schalter",
            "#url": "http://192.168.15.100:1883",
            "caption": "Bad_Deckenlicht",
            "topics": {
                "getOn": "shellies/shellyswitch-1349E9/relay/0",
                "setOn": "shellies/shellyswitch-1349E9/relay/0/command"
            },
            "integerValue": "false",
            "onValue": "on",
            "offValue": "off"
        },
        {
            "accessory": "mqttthing",
            "type": "switch",
            "name": "Bad Spiegellicht Schalter",
            "#url": "http://192.168.15.100:1883",
            "caption": "Bad_Spiegellicht",
            "topics": {
                "getOn": "shellies/shellyswitch-1349E9/relay/1",
                "setOn": "shellies/shellyswitch-1349E9/relay/1/command"
            },
            "integerValue": "false",
            "onValue": "on",
            "offValue": "off"
        },
        {
            "accessory": "mqttthing",
            "type": "switch",
            "name": "WC Licht Schalter",
            "#url": "http://192.168.15.100:1883",
            "caption": "WC_Licht",
            "topics": {
                "getOn": "shellies/shelly1-2C1435/relay/0",
                "setOn": "shellies/shelly1-2C1435/relay/0/command"
            },
            "integerValue": "false",
            "onValue": "on",
            "offValue": "off"
        },
        {
            "accessory": "mqttthing",
            "type": "switch",
            "name": "Esszimmer Licht Schalter",
            "#url": "http://192.168.15.100:1883",
            "caption": "Esszimmer_Licht",
            "topics": {
                "getOn": "shellies/shelly1-32CE66/relay/0",
                "setOn": "shellies/shelly1-32CE66/relay/0/command"
            },
            "integerValue": "false",
            "onValue": "on",
            "offValue": "off"
        },
        {
            "accessory": "mqttthing",
            "type": "switch",
            "name": "Wohnzimmer Regal Schalter",
            "#url": "http://192.168.15.100:1883",
            "caption": "Wohnzimmer_Regal_Licht",
            "topics": {
                "getOn": "shellies/shellyplug-s-040D25/relay/0",
                "setOn": "shellies/shellyplug-s-040D25/relay/0/command"
            },
            "integerValue": "false",
            "onValue": "on",
            "offValue": "off"
        },
        {
            "accessory": "mqttthing",
            "type": "switch",
            "name": "Schlafzimmer Dieter Deckenlichtschalter",
            "#url": "http://192.168.15.100:1883",
            "caption": "Schlafzimmer_Dieter_Deckenlicht",
            "topics": {
                "getOn": "shellies/shelly1-058ABE/relay/0",
                "setOn": "shellies/shelly1-058ABE/relay/0/command"
            },
            "integerValue": "false",
            "onValue": "on",
            "offValue": "off"
        },
        {
            "accessory": "mqttthing",
            "type": "switch",
            "name": "Schlafzimmer Susi Deckenlichtschalter",
            "#url": "http://192.168.15.100:1883",
            "caption": "Schlafzimmer_Susi_Deckenlicht",
            "topics": {
                "getOn": "shellies/shelly1-5B2B93/relay/0",
                "setOn": "shellies/shelly1-5B2B93/relay/0/command"
            },
            "integerValue": "false",
            "onValue": "on",
            "offValue": "off"
        },
        {
            "accessory": "mqttthing",
            "type": "lightbulb",
            "name": "Stehlampe oberes Licht",
            "#url": "http://192.168.15.100:1883",
            "caption": "StehlampeOben",
            "topics": {
                "getOn": "zigbee2mqtt/StehlampeOben/get",
                "setOn": "zigbee2mqtt/StehlampeOben/set",
                "getBrightness": {
                    "topic": "zigbee2mqtt/StehlampeOben/get",
                    "apply": "return JSON.stringify({\"brightness\": \"\"});"
                },
                "setBrightness": {
                    "topic": "zigbee2mqtt/StehlampeOben/set",
                    "apply": "return JSON.stringify({\"brightness\": Math.round( message * 254/100 )});"
                }
            },
            "integerValue": "false",
            "onValue": "ON",
            "offValue": "OFF",
            "logMqtt": false
        },
        {
            "accessory": "mqttthing",
            "type": "lightbulb",
            "name": "Stehlampe unteres Licht",
            "#url": "http://192.168.15.100:1883",
            "caption": "StehlampeUnten",
            "topics": {
                "getOn": "zigbee2mqtt/StehlampeUnten/get",
                "setOn": "zigbee2mqtt/StehlampeUnten/set",
                "getBrightness": {
                    "topic": "zigbee2mqtt/StehlampeUnten/get",
                    "apply": "return JSON.stringify({\"brightness\": \"\"});"
                },
                "setBrightness": {
                    "topic": "zigbee2mqtt/StehlampeUnten/set",
                    "apply": "return JSON.stringify({\"brightness\": Math.round( message * 254/100 )});"
                }
            },
            "integerValue": "false",
            "onValue": "ON",
            "offValue": "OFF",
            "logMqtt": false
        },
        {
            "accessory": "mqttthing",
            "type": "lightbulb",
            "name": "Stehlampe Esszimmer",
            "#url": "http://192.168.15.100:1883",
            "caption": "StehlampeEsszimmer",
            "topics": {
                "getOn": "zigbee2mqtt/StehlampeEsszimmer/get",
                "setOn": "zigbee2mqtt/StehlampeEsszimmer/set",
                "getBrightness": {
                    "topic": "zigbee2mqtt/StehlampeEsszimmer/get",
                    "apply": "return JSON.stringify({\"brightness\": \"\"});"
                },
                "setBrightness": {
                    "topic": "zigbee2mqtt/StehlampeEsszimmer/set",
                    "apply": "return JSON.stringify({\"brightness\": Math.round( message * 254/100 )});"
                },
                "getColorTemperature": {
                    "topic": "zigbee2mqtt/StehlampeEsszimmer/get",
                    "apply": "return JSON.stringify({\"color_temp\": \"\"});"
                },
                "setColorTemperature": {
                    "topic": "zigbee2mqtt/StehlampeEsszimmer/set",
                    "apply": "return JSON.stringify({\"color_temp\": Math.round(message * 204/360 + 170 + 2/3 )});"
                }
            },
            "integerValue": "false",
            "onValue": "ON",
            "offValue": "OFF",
            "logMqtt": false
        },
        {
            "accessory": "mqttthing",
            "type": "lightbulb",
            "name": "Schlafzimmer Dieter Lampe",
            "topics": {
              "getOn": {
                "topic": "zigbee2mqtt/SchlafzimmerDieter",
                "apply": "return JSON.parse(message).state;"
              },
              "setOn": {
                "topic": "zigbee2mqtt/SchlafzimmerDieter/set",
                "apply": "return JSON.stringify({ state: message})"
              },
              "getHSV": {
                "topic": "zigbee2mqtt/SchlafzimmerDieter",
                "apply": "function cie_to_rgb(r,s,t){void 0===t&&(t=254);var a=1-r-s,h=(t/254).toFixed(2),o=h/s*r,e=h/s*a,v=1.656492*o-.354851*h-.255038*e,i=.707196*-o+1.655397*h+.036152*e,n=.051713*o-.121364*h+1.01153*e;return v>n&&v>i&&v>1?(i/=v,n/=v,v=1):i>n&&i>v&&i>1?(v/=i,n/=i,i=1):n>v&&n>i&&n>1&&(v/=n,i/=n,n=1),v=v<=.0031308?12.92*v:1.055*Math.pow(v,1/2.4)-.055,i=i<=.0031308?12.92*i:1.055*Math.pow(i,1/2.4)-.055,n=n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055,v=Math.round(255*v),i=Math.round(255*i),n=Math.round(255*n),isNaN(v)&&(v=0),isNaN(i)&&(i=0),isNaN(n)&&(n=0),[v,i,n]}function RGBtoHSV(r,s,t){1===arguments.length&&(s=r.g,t=r.b,r=r.r);var a,h=Math.max(r,s,t),o=Math.min(r,s,t),e=h-o,v=0===h?0:e/h,i=h/255;switch(h){case o:a=0;break;case r:a=s-t+e*(s<t?6:0),a/=6*e;break;case s:a=t-r+2*e,a/=6*e;break;case t:a=r-s+4*e,a/=6*e}return{h:a,s:v,v:i}}var m=JSON.parse(message),rgb=cie_to_rgb(m.color.x,m.color.y,m.brightness/2.55),hsv=RGBtoHSV(rgb[0],rgb[1],rgb[2]);hsv.h=360*hsv.h,hsv.s=100*hsv.s,hsv.v=254*hsv.v;var result=hsv.h.toString()+\",\"+hsv.s.toString()+\",\"+(m.brightness/2.54).toString();return result;"
              },
              "setHSV": {
                "topic": "zigbee2mqtt/SchlafzimmerDieter/set",
                "apply": "function HSVtoRGB(r,a,e){var t,s,o,b,c,n,i,u;switch(1===arguments.length&&(a=r.s,e=r.v,r=r.h),n=e*(1-a),i=e*(1-(c=6*r-(b=Math.floor(6*r)))*a),u=e*(1-(1-c)*a),b%6){case 0:t=e,s=u,o=n;break;case 1:t=i,s=e,o=n;break;case 2:t=n,s=e,o=u;break;case 3:t=n,s=i,o=e;break;case 4:t=u,s=n,o=e;break;case 5:t=e,s=n,o=i}return{r:Math.round(255*t),g:Math.round(255*s),b:Math.round(255*o)}}function ScaledHSVtoRGB(r,a,e){return HSVtoRGB(r/360,a/100,e/100)}function rgb_to_cie(r,a,e){var t=.664511*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)+.154324*(a=a>.04045?Math.pow((a+.055)/1.055,2.4):a/12.92)+.162028*(e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92),s=.283881*r+.668433*a+.047685*e,o=88e-6*r+.07231*a+.986039*e,b=(t/(t+s+o)).toFixed(4),c=(s/(t+s+o)).toFixed(4);return isNaN(b)&&(b=0),isNaN(c)&&(c=0),[b,c]}var params=message.split(\",\"),result={},rgb=ScaledHSVtoRGB(params[0],params[1],100),xy=rgb_to_cie(rgb.r,rgb.g,rgb.b);result.color={x:xy[0],y:xy[1]};var b=2.54*params[2];result.brightness=b;return JSON.stringify(result);"
              }
            },
            "onValue": "ON",
            "offValue": "OFF",
            "logMqtt": true
        },
        {
            "type": "statelessProgrammableSwitch",
            "name": "Flur Remote",
            "#url": "http://192.168.15.100:1883",
            "caption": "Flur Remote",
            "topics": {
                "getSwitch": [
                    {
                        "topic": "zigbee2mqtt/FlurSchalter",
                        "apply": "return JSON.parse(message).action;"
                    },
                    {
                        "topic": "zigbee2mqtt/FlurSchalter",
                        "apply": "return JSON.parse(message).action;"
                    }
                ],
                "getStatusLowBattery": {
                    "topic": "zigbee2mqtt/FlurSchalter",
                    "apply": "return (JSON.parse(message).battery < 20) ? 1 : 0;"
                },
                "getBatteryLevel": {
                    "topic": "zigbee2mqtt/FlurSchalter",
                    "apply": "return JSON.parse(message).battery;"
                }
            },
            "switchValues": [
                [
                    "on-press",
                    "on-hold",
                    "nix"
                ],
                [
                    "off-press",
                    "off-hold",
                    "nix"
                ]
            ],
            "accessory": "mqttthing",
            "logMqtt": false
        },
        {
            "type": "statelessProgrammableSwitch",
            "name": "Wohnzimmer Remote",
            "#url": "http://192.168.15.100:1883",
            "caption": "Wohnzimmer Remote",
            "topics": {
                "getSwitch": [
                    {
                        "topic": "zigbee2mqtt/Wohnzimmerschalter",
                        "apply": "return JSON.parse(message).action;"
                    },
                    {
                        "topic": "zigbee2mqtt/Wohnzimmerschalter",
                        "apply": "return JSON.parse(message).action;"
                    }
                ],
                "getStatusLowBattery": {
                    "topic": "zigbee2mqtt/Wohnzimmerschalter",
                    "apply": "if (JSON.parse(message).battery < 20) return 1; else return 0;"
                },
                "getBatteryLevel": {
                    "topic": "zigbee2mqtt/Wohnzimmerschalter",
                    "apply": "return JSON.parse(message).battery;"
                }
            },
            "switchValues": [
                [
                    "on-press",
                    "on-hold",
                    "nix"
                ],
                [
                    "off-press",
                    "off-hold",
                    "nix"
                ]
            ],
            "accessory": "mqttthing",
            "logMqtt": false
        },
        {
            "type": "statelessProgrammableSwitch",
            "name": "IKEADimmer1",
            "#url": "http://192.168.15.100:1883",
            "topics": {
                "getSwitch": [
                    {
                        "topic": "zigbee2mqtt/0x90fd9ffffe08cdc9",
                        "apply": "return JSON.parse(message).action;"
                    },
                    {
                        "topic": "zigbee2mqtt/0x90fd9ffffe08cdc9",
                        "apply": "return JSON.parse(message).action;"
                    },
                    {
                        "topic": "zigbee2mqtt/0x90fd9ffffe08cdc9",
                        "apply": "return JSON.parse(message).action;"
                    }
                ],
                "getStatusLowBattery": {
                    "topic": "zigbee2mqtt/0x90fd9ffffe08cdc9",
                    "apply": "if (JSON.parse(message).battery < 20) return 1; else return 0;"
                },
                "getBatteryLevel": {
                    "topic": "zigbee2mqtt/0x90fd9ffffe08cdc9",
                    "apply": "return JSON.parse(message).battery;"
                }
            },
            "switchValues": [
                [
                    "toggle",
                    "toggle-hold",
                    "nix"
                ],
                [
                    "brightness_up_click",
                    "brightness_down_click",
                    "nix"
                ],
                [
                    "arrow_left_click",
                    "arrow_right_click",
                    "nix"
                ]
            ],
            "accessory": "mqttthing",
            "logMqtt": false
        },
        {
            "accessory": "mqttthing",
            "type": "motionSensor",
            "name": "Flur Motionsensor",
            "#url": "http://192.168.15.100:1883",
            "caption": "Flur Motionsensor",
            "topics": {
                "getMotionDetected": {
                    "topic": "zigbee2mqtt/FlurBewegungsmelder",
                    "apply": "return JSON.parse(message).occupancy ? \"ON\" : \"OFF\";"
                },
                "getBatteryLevel": {
                    "topic": "zigbee2mqtt/FlurBewegungsmeldera",
                    "apply": "return JSON.parse(message).battery;"
                }
            },
            "integerValue": "true",
            "onValue": "ON",
            "offValue": "OFF",
            "logMqtt": false
        },
        {
            "accessory": "mqttthing",
            "type": "temperatureSensor",
            "name": "Flur Motionsensor Temperatur",
            "#url": "http://192.168.15.100:1883",
            "caption": "Flur Motionsensor Temperatur",
            "topics": {
                "getCurrentTemperature": {
                    "topic": "zigbee2mqtt/FlurBewegungsmelder",
                    "apply": "return JSON.parse(message).temperature;"
                }
            },
            "minTemperature": 0,
            "maxTemperature": 50,
            "logMqtt": false
        },
        {
            "accessory": "mqttthing",
            "type": "lightSensor",
            "name": "Flur Motionsensor lightSensor",
            "#url": "http://192.168.15.100:1883",
            "caption": "Flur Motionsensor lightSensor",
            "topics": {
                "getCurrentAmbientLightLevel": {
                    "topic": "zigbee2mqtt/FlurBewegungsmelder",
                    "apply": "return JSON.parse(message).illuminance_lux;"
                }
            },
            "logMqtt": false
        }
    ],
    "platforms": [
        {
            "name": "Config",
            "port": 8581,
            "platform": "config"
        }
    ]
}
